import{_ as ae}from"../chunks/preload-helper.D6kgxu3v.js";import{s as se,e as y,a as M,c as E,b as C,f,g as P,l as ne,o as g,i as k,h as b,k as A,q as oe,u as q,m as z,A as B,w as D,x as ce,n as ie,H as Y,v as Z,p as F,y as ue,t as R,d as j,j as L}from"../chunks/scheduler.DZ0qFkGh.js";import{S as he,i as fe,b as H,e as pe,t as O,g as de,c as ee,a as te,m as le,d as re}from"../chunks/index.BxV-SLwI.js";import{e as U}from"../chunks/each.D6YF6ztN.js";import{M as _e,s as me}from"../chunks/index.BHI7DWJj.js";import{I as ge}from"../chunks/Icon.kZPibzlw.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.B_Rk9843.js";import{P as ve}from"../chunks/ProgressBar.DzC-4OQb.js";import{d as J,e as K,f as G}from"../chunks/stores.p31XHE-n.js";function Q(i,l,r=300){let e=l.toLowerCase(),t=0,s=l.length,a=!1;for(let n=0;n<i.length;n++){const p=i[n].toLowerCase();if(p.length<=2)continue;const c=e.indexOf(p,t);c!==-1&&(a||(t=Math.max(0,c-20),a=!0),s=Math.min(l.length,c+p.length+20),t=Math.max(0,s-r))}if(!a)return l.slice(0,r)+(l.length>r?"...":"");let u=l.slice(t,s);return t>0&&(u="..."+u),s<l.length&&(u+="..."),i.forEach(n=>{if(n.length<=2)return;const p=new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");u=u.replace(p,"<strong>$&</strong>")}),u}function W(i,l,r){const e=i.slice();return e[9]=l[r],e}function ye(i){let l,r="Polysearch ECN",e,t,s=`<div>Moteur de recherche pour les objectifs de l&#39;examen classant national (ECN/résidanat).</div> <div class="text-primary-500">Cette application coûte du temps et de l&#39;argent de ma part pour maintenir, considérez me
				supportez <a href="https://iheb.tn/donate" class="underline text-secondary-500">sur ce lien</a>.</div>`,a,u,n,p,c,d,h,w,$,I,N;d=new ge({props:{data:me}});function T(o,m){return o[2].length>0?ke:be}let v=T(i),_=v(i);return{c(){l=y("h1"),l.textContent=r,e=M(),t=y("div"),t.innerHTML=s,a=M(),u=y("div"),n=y("input"),p=M(),c=y("button"),ee(d.$$.fragment),h=M(),w=y("div"),_.c(),this.h()},l(o){l=E(o,"H1",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-1gkukih"&&(l.textContent=r),e=P(o),t=E(o,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-26y5jm"&&(t.innerHTML=s),a=P(o),u=E(o,"DIV",{class:!0});var m=C(u);n=E(m,"INPUT",{type:!0,placeholder:!0}),p=P(m),c=E(m,"BUTTON",{class:!0});var S=C(c);te(d.$$.fragment,S),S.forEach(f),m.forEach(f),h=P(o),w=E(o,"DIV",{class:!0});var x=C(w);_.l(x),x.forEach(f),this.h()},h(){g(l,"class","h1 text-center"),g(t,"class","text-sm text-center"),g(n,"type","search"),g(n,"placeholder","Rechercher les objectifs"),g(c,"class","variant-filled-secondary"),g(u,"class","input-group input-group-divider grid-cols-[1fr_auto] xl:w-2/3 mx-auto"),g(w,"class","space-y-4 grid")},m(o,m){k(o,l,m),k(o,e,m),k(o,t,m),k(o,a,m),k(o,u,m),b(u,n),B(n,i[3]),b(u,p),b(u,c),le(d,c,null),k(o,h,m),k(o,w,m),_.m(w,null),$=!0,I||(N=[D(n,"input",i[5]),D(n,"keydown",i[6]),D(c,"click",i[4])],I=!0)},p(o,m){m&8&&n.value!==o[3]&&B(n,o[3]),v===(v=T(o))&&_?_.p(o,m):(_.d(1),_=v(o),_&&(_.c(),_.m(w,null)))},i(o){$||(O(d.$$.fragment,o),$=!0)},o(o){H(d.$$.fragment,o),$=!1},d(o){o&&(f(l),f(e),f(t),f(a),f(u),f(h),f(w)),re(d),_.d(),I=!1,ce(N)}}}function Ee(i){let l,r="Chargement de Polysearch ECN",e,t,s;return t=new ve({props:{value:void 0,meter:"bg-secondary-500",track:"bg-secondary-500/30"}}),{c(){l=y("p"),l.textContent=r,e=M(),ee(t.$$.fragment),this.h()},l(a){l=E(a,"P",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-a16h7o"&&(l.textContent=r),e=P(a),te(t.$$.fragment,a),this.h()},h(){g(l,"class","p-4 text-center")},m(a,u){k(a,l,u),k(a,e,u),le(t,a,u),s=!0},p:ie,i(a){s||(O(t.$$.fragment,a),s=!0)},o(a){H(t.$$.fragment,a),s=!1},d(a){a&&(f(l),f(e)),re(t,a)}}}function be(i){let l,r;return{c(){l=y("p"),r=new Y(!1),this.h()},l(e){l=E(e,"P",{class:!0});var t=C(l);r=Z(t,!1),t.forEach(f),this.h()},h(){r.a=null,g(l,"class","text-center")},m(e,t){k(e,l,t),r.m(i[0],l)},p(e,t){t&1&&r.p(e[0])},d(e){e&&f(l)}}}function ke(i){let l,r=U(i[2]),e=[];for(let t=0;t<r.length;t+=1)e[t]=X(W(i,r,t));return{c(){for(let t=0;t<e.length;t+=1)e[t].c();l=F()},l(t){for(let s=0;s<e.length;s+=1)e[s].l(t);l=F()},m(t,s){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(t,s);k(t,l,s)},p(t,s){if(s&12){r=U(t[2]);let a;for(a=0;a<r.length;a+=1){const u=W(t,r,a);e[a]?e[a].p(u,s):(e[a]=X(u),e[a].c(),e[a].m(l.parentNode,l))}for(;a<e.length;a+=1)e[a].d(1);e.length=r.length}},d(t){t&&f(l),ue(e,t)}}}function X(i){let l,r,e,t,s=i[9].title+"",a,u,n,p,c=Q(i[9].terms,i[9].content)+"",d,h,w,$=i[9].page+"",I,N,T;return{c(){l=y("a"),r=y("div"),e=y("header"),t=y("h3"),a=R(s),u=M(),n=y("section"),p=new Y(!1),d=M(),h=y("footer"),w=R("Page "),I=R($),N=M(),this.h()},l(v){l=E(v,"A",{href:!0});var _=C(l);r=E(_,"DIV",{class:!0});var o=C(r);e=E(o,"HEADER",{class:!0});var m=C(e);t=E(m,"H3",{class:!0});var S=C(t);a=j(S,s),S.forEach(f),m.forEach(f),u=P(o),n=E(o,"SECTION",{class:!0});var x=C(n);p=Z(x,!1),x.forEach(f),d=P(o),h=E(o,"FOOTER",{class:!0});var V=C(h);w=j(V,"Page "),I=j(V,$),V.forEach(f),o.forEach(f),N=P(_),_.forEach(f),this.h()},h(){g(t,"class","h3"),g(e,"class","card-header"),p.a=null,g(n,"class","p-4"),g(h,"class","card-footer text-sm italic"),g(r,"class","card text-left"),g(l,"href",T=`/viewer?title=${i[9].title}&page=${i[9].page}&query=${i[3]}&goBack=/ecn/polysearch`)},m(v,_){k(v,l,_),b(l,r),b(r,e),b(e,t),b(t,a),b(r,u),b(r,n),p.m(c,n),b(r,d),b(r,h),b(h,w),b(h,I),b(l,N)},p(v,_){_&4&&s!==(s=v[9].title+"")&&L(a,s),_&4&&c!==(c=Q(v[9].terms,v[9].content)+"")&&p.p(c),_&4&&$!==($=v[9].page+"")&&L(I,$),_&12&&T!==(T=`/viewer?title=${v[9].title}&page=${v[9].page}&query=${v[3]}&goBack=/ecn/polysearch`)&&g(l,"href",T)},d(v){v&&f(l)}}}function we(i){let l,r,e,t,s,a;const u=[Ee,ye],n=[];function p(c,d){return c[1]?0:1}return r=p(i),e=n[r]=u[r](i),{c(){l=y("div"),e.c(),t=M(),s=y("meta"),this.h()},l(c){l=E(c,"DIV",{class:!0});var d=C(l);e.l(d),d.forEach(f),t=P(c);const h=ne("svelte-nwq67j",document.head);s=E(h,"META",{name:!0,content:!0}),h.forEach(f),this.h()},h(){g(l,"class","w-full space-y-8 px-4 py-8 grid"),document.title="Polysearch ECN",g(s,"name","description"),g(s,"content","Moteur de recherche pour les objectifs de l'examen classant national (ECN/résidanat)")},m(c,d){k(c,l,d),n[r].m(l,null),k(c,t,d),b(document.head,s),a=!0},p(c,[d]){let h=r;r=p(c),r===h?n[r].p(c,d):(de(),H(n[h],1,1,()=>{n[h]=null}),pe(),e=n[r],e?e.p(c,d):(e=n[r]=u[r](c),e.c()),O(e,1),e.m(l,null))},i(c){a||(O(e),a=!0)},o(c){H(e),a=!1},d(c){c&&(f(l),f(t)),n[r].d(),f(s)}}}function Ce(i,l,r){let e,t,s;A(i,J,h=>r(8,e=h)),A(i,K,h=>r(2,t=h)),A(i,G,h=>r(3,s=h));let a="";const u=()=>{s.length>0?(q(K,t=e.search(s).slice(0,20),t),t.length===0&&r(0,a="Aucun résultat trouvé (╯°□°）╯︵ ┻━┻")):r(0,a="Entrez un terme puis recherchez! ;)")};let n=[],p=!0;oe(async()=>{if(e==null)try{n=(await ae(()=>import("../chunks/courscommuns.DuyhvZO6.js"),[],import.meta.url)).default}catch(h){console.error("Failed to load JSON:",h)}finally{q(J,e=new _e({fields:["title","page","content","id"],storeFields:["title","page","content","id"],searchOptions:{boost:{title:3},fuzzy:.1,prefix:!0}}),e),e.addAll(n),r(1,p=!1)}else r(1,p=!1)});function c(){s=this.value,G.set(s)}return[a,p,t,s,u,c,h=>{h.key==="Enter"&&u()}]}class Oe extends he{constructor(l){super(),fe(this,l,Ce,we,se,{})}}export{Oe as component};
